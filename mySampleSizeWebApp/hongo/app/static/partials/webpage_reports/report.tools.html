<div class="text-center padding-bottom-2em padding-top-2em">
    <h2 class="text-grey">Tools Summary Report</h2> 
    <p>a downloadable summary of your Sample Size and Statistical Power calculations is provided below</p>

    <div class="form_tools" ng-hide="user_id == 1">
        <div class="row">
            <div class="col-sm-11 col-sm-offset-0">
                <h5> Hello, {{authService.email}}! Please choose a project to view:</h5>
            </div>
            <div class="col-sm-5 col-sm-offset-1">
                <select ng-options="sqlprojects.name for sqlprojects in authService.sqlprojects.options track by sqlprojects.id" 
                    ng-model="authService.sqlprojects.selected" 
                    ng-change="spin();projectChange();getToolsReport()">
                </select>
                <div class="indent">
                    <h3> Sub Projects </h3>
                    <select ng-model="authService.subProjectSelected"
                        ng-change="getToolsReport()"
                        ng-options="subs.name for subs in authService.sqlprojects.selected.subs track by subs.id+subs.name" size="4">
                        <!-- the "track by" property must be unique. The rowid (previous version is not), thus use multiple identifiers ("id" and "name") -->
                    </select>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row background-transparent">
    
    <div class="form-container">
        <div ng-show="(user_id == 1) || !authService.authenticated">
            <div class="warning-bar">
                <h1 class="text-ltgrey">Hello Guest!<br><tooltip-warn></tooltip-warn>Please login to view a saved project.</h1>
                <div class="col-xs-12 col-sm-4 col-xs-offset-0 col-sm-offset-4">
                    <button type="button" class="btn btn-primary btn-lg margin-top-1em width-100" ng-click="authService.login()">Login</button>
                </div>
            </div>

            <div class="wait-icon col-xs-2 col-xs-offset-5" style="top:0;margin-top:35em;opacity: 1;z-index:0;">
                <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
            </div>
            <iframe class="report background-black" scrolling="yes" seamless="seamless" ng-src="{{tools_report_url}}" height="1000vh" style="opacity:0.3;"></iframe>
        </div>
    
        <div ng-if="(user_id != 1) || authService.authenticated" ng-init="getToolsReport()">
<!--
            <div class="wait-icon col-xs-2 col-xs-offset-5" style="top:0; margin-top:25em; opacity: 1; z-index:0;">
                <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
            </div>
            <div ng-show="spin_status==100" class="wait-icon col-xs-2 col-xs-offset-5" style="top:0; margin-top:25em; opacity:1;">
                <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
            </div>
-->
            <iframe class="report" scrolling="yes" seamless="seamless" ng-src="{{tools_report_url}}" height="1000vh" style="z-index: 1;"></iframe>
        </div>
    </div>

</div>
