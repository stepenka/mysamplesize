
<div ng-controller="userProjectsController" ng-show="authService.authenticated">
  <div ng-class="{'col-sm-10 col-sm-offset-1': design.notEmbedded}">
    
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Project Name 
                    <a ng-show="!showUp" ng-click="showUp=true;sortUpName()"><i class="fa fa-sort"></i></a>
                    <a ng-show="showUp" ng-click="showUp=false;sortDownName()"><i class="fa fa-sort"></i></a>
                </th>
                <th>Date Created 
                    <a ng-show="!showUp2" ng-click="showUp2=true;sortUpDate()"><i class="fa fa-sort"></i></a>
                    <a ng-show="showUp2" ng-click="showUp2=false;sortDownDate()"><i class="fa fa-sort"></i></a>
                </th>
                <th colspan=3></th>
            </tr>
        </thead>

        <tbody id="userRepeat"> <!-- ng-if="design.notEmbedded"> -->
            <tr ng-repeat="s in authService.sqlprojects.options" class="">
                <td>
                    <span ng-bind="s.name"></span>
                    <table class="table table-hover">
                        <tbody>
                            <tr ng-repeat="n in s.subs">
                                <td>
                                    <a class="cursor-pointer" ng-click="clickProject(s,n)">
                                        <span ng-bind="n.name"></span>
                                    </a>
                                </td>
                                <td ng-if="design.notEmbedded">
                                    <a class="cursor-pointer" ng-click="deleteProject(s,n)">
                                        <span class="fa fa-remove"></span>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td ng-bind="s.created"></td>
                <td ng-if="design.notEmbedded">
                    <button type="button" class="icon btn btn-default" ng-click="removesqlRow( authService.sqlprojects.options, $index )" >
                        delete
                    </button>
                </td>
                <td ng-if="design.notEmbedded">
                    <form name="sqlForm" ng-show="showBtn" ng-submit="renameSubmit(sqlForm.$valid, authService.sqlprojects.options, $index, newname)" novalidate>
                        <input type="text" maxlength="21" name="newname" value="newname" ng-model="newname" placeholder="NewProject" ng-minlength="1" ng-maxlength="20" required>
                        <button type="submit" ng-disabled="sqlForm.$invalid" class="icon btn btn-default" style="float:right; width:70px;">OK</button>
                        <div uib-alert ng-show="sqlForm.newname.$error.maxlength" class="help-block">Project name is too long.</div>
                        <div uib-alert ng-show="sqlForm.newname.$invalid && !sqlForm.newname.$error.maxlength" class="help-block">A project name is required</div>
                        <div uib-alert ng-show="alert" class="help-block">This Project Name already exists!</div>
                    </form>
                    
                    <button type="button" class="icon btn btn-default" ng-click="showBtn=true" ng-show="!showBtn">
                        rename 
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
    
    <button type="button" id="addsqlRow" class="icon btn btn-default text-left" ng-click="check_addsqlRow( authService.sqlprojects.options )" style="width:150px;">
        <span class="fa fa-plus"></span> Create Project
    </button>
    <div uib-alert ng-show="alert2==true" class="help-block" style="background-color:red;">Error: Sorry, you have too many projects!</div>
    
  </div>
</div>
