<h2 class="text-grey text-lowercase">Effect Size in ANOVA</h2>
<hr>
<div class="row">
<div class="row margin-bottom-2em">
    <div class="col-sm-2"><span class="fa-4x"><i class="fa fa-newspaper-o text-green"></i></span></div>
    <div class="col-sm-10">
        <p>
            Effect Size captures the unknown-but-true difference between experimental groups.
        </p>
        <p>
            In a two-sample T-Test, effect size is straightforward: the underlying true difference in the means of the two populations. In ANOVA, we usually look at more than two groups. The basic one-way ANOVA test is this: is there at least one group that has a different mean, or are all the group means the same? How do we define effect size in this situation?
        </p>
        <p>
            In the figure below, we illustrate the distributions of three groups, with means 
            <katex>\mu_1, \mu_2</katex>, and <katex>\mu_3</katex>. 
            The three pair-wise differences all represent effect sizes for T-Tests comparing the respective pairs. But what is the effect size relevant to the ANOVA test?
        </p>
        
        <div class="row padding-bottom-2em ">
            <div class="col-sm-8 col-sm-offset-2">
                <img ng-src="{{imgPath}}/threeNormals.png" class="width-100" src="{{imgPath}}/threeNormals.png">
            </div>
        </div>

        <p>
            Effect size in ANOVA needs to look at all of these differences. The definition we use, following Lenth (2001), is the standard deviation of the groups' means:
            <div katex>
                \text{EffectSize} = \sqrt{ \frac{1}{\text{nGroups}-1} \sum_{i=1}^{\text{nGroups}} ( \mu_i - \bar{\mu})^2 }
            </div>
            The <katex>\bar{\mu}</katex> symbol may look weird, but it has an important meaning: it's the grand mean of all the groups.
        </p>
    </div>
</div>

<h2 class="text-grey margin-top text-lowercase">Illustration</h2>
<hr>
<div class="row margin-bottom-2em">
    <div class="col-sm-2"><span class="fa-4x"><i class="fa fa-line-chart text-green"></i></span></div>
    <div class="col-sm-10">
        <p>
            Below we illustrate the distributions of a control and two treatment groups. The control group has a fixed mean, but you can use the slider bars for the two treatment means to see how the ANOVA effect size changes.
        </p>
        <p>
            ANOVA effect size: <b>{{ meanAnovaOutput.effectSize.toPrecision(3) }}</b><br>
            individual pair-wise differences:
            <b><span ng-repeat="tmp in meanAnovaOutput.pairDiffs track by $index"> {{ tmp.toPrecision(2) }},</span></b>
        </p>
        <div class="row padding-bottom-2em" ng-init="initPlotType('ANOVAmeans')">
            <!--p class="text-bold">
                ANOVA effect size: {{ meanAnovaOutput.effectSize.toPrecision(3) }}<br>
                individual pair-wise differences:
                <span ng-repeat="n in meanAnovaOutput.pairDiffs track by $index"> {{ n[0].toPrecision(2) }},</span>
            </p-->
            
            <div class="col-xs-12">
                <nvd3 options="esMeanPlotOptions" data="meanAnovaPlotData"></nvd3>
            </div>
            
            <div class="col-sm-6">
                <h5> Treatment 1 Mean </h5><br>
                <rzslider rz-slider-model="tMean1_slider.value" rz-slider-options="tMean1_slider.options"></rzslider>
            </div>
            <div class="col-sm-6 col-sm-offset-0">

                <h5> Treatment 2 Mean </h5><br>
                <rzslider rz-slider-model="tMean2_slider.value" rz-slider-options="tMean2_slider.options"></rzslider>
            </div>
        </div>
    </div>
</div>

<h2 class="text-grey margin-top text-lowercase">Test Your Understanding</h2>
<hr>
<div class="row">
    <div class="col-md-5 green_side">
        <div class="row col-sm-offset-1">
            <p>
                The ANOVA hypothesis that all groups have the same mean is tested using the F-distribution. Below you can see the central (null hypothesis) and non-central (alternative at your effect size) F-distributions. Sliders below allow you to adjust number of subjects in each group, the number of groups, the outcome measure standard deviation, effect size, and significance. 
            </p>
            <p class="text-bold"> 
                Move the sliders to see how these quantities impact the power of the test.
            </p>
        </div>
        
        <div class="row padding-bottom-2em" ng-init="initPlotType('effectSizeANOVA')">
            <div class="col-xs-12">
                <nvd3 options="esPlotOptions" data="esAnovaPlotData"></nvd3>
            </div>
            
            <p align="center"><big>Power for your sample size: <b id="pwrDisp">{{powerVal.toFixed(4)}}</b></big> </p>
            
            <div class="col-sm-6 padding-bottom-2em sliderWithLabel">
                <h5> Number of Subjects per Group </h5><br>
                <rzslider rz-slider-model="sampleSize_slider.value" rz-slider-options="sampleSize_slider.options"></rzslider>
                <br>
                <h5> Effect Size </h5><br>
                <rzslider rz-slider-model="effectSize_slider.value" rz-slider-options="effectSize_slider.options"></rzslider>
                
                <h5> Significance </h5><br>
                <rzslider rz-slider-model="sigLevel_slider.value" rz-slider-options="sigLevel_slider.options"></rzslider>
            </div>
            <div class="col-sm-6 sliderWithLabel">
                <h5> Number of Groups <br><br></h5><br>
                <rzslider rz-slider-model="nGroups_slider.value" rz-slider-options="nGroups_slider.options"></rzslider>

                <h5> Standard Deviation </h5><br>
                <rzslider rz-slider-model="stdev_slider.value" rz-slider-options="stdev_slider.options"></rzslider>
            </div>
        </div>
    </div>
    
    <div class="col-md-7">
        <div class="row col-sm-offset-1">
            <div ng-include src="'static/partials/webpage_help/statbasics/simulation_blurb.html'"></div>
        </div>
        
        <div class="row padding-bottom-2em padding-top-1em" ng-controller="simPlotCtrl">
            <p align="center">
            <button type="button" class="btn btn-primary col-sm-offset-1" ng-click="updateSimPlot(data.id)">
                Simulate Random Experiment
            </button></p>

            <div class="row" ng-init="initSimPlot(helpService.simPlotData)">
                <h4 align="center">p-value this simulation: <b id="pVal">{{data.pVal[0].toFixed(4)}}</b> </h4>

                <div class="col-xs-12" id="simPlot">
                    <nvd3 options="myOptions" data="myData" api="dummy.api"></nvd3>
                </div>
            </div>
        </div>
    </div>
</div>
